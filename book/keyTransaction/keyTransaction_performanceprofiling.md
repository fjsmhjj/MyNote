# 关键事务>性能剖析

**1.关键事务>性能剖析**

* 抓取的结果是应用> Tier >性能剖析的一个子集。针对的是选定探针对应的关键事务进行线程的抓取。
* 对于某个关键事务来说只能同时进行一个性能剖析，如果想要创建一个新的性能剖析则需要将正在进行的性能剖析暂停或删除。


![](/images/p01.png)

**2.默认设置：**

* 1.持续时间：60 min;   采样周期：1000 ms 。
* 2.可以根据需要进行调整。

**注：**采样周期和持续时间只能在开始创建性能剖析时进行设定。

![](/images/p002.png)

**3.剖析页面：**

* 1.关键事务的新能剖析由总览和线程分析和性能剖析信息（对应的关键事务和应用名称，开始时间、状态和采样次数）。

![](/images/p02.png)

* 总览页面  展示了抓取到的全部的trace数据以及Trace响应时间分布，响应时间&吞吐量，APP Server  Breakdown和耗时最长的统计等图表。
* 下面是可以进行深度链接操作的简要总结：

| 序号  |   If You Want To ...    | Do This ...  |
| ------- |:-------:| -------:|
| 1 | 从不同的维度查看trace | 点击耗时/开始时间 |
| 2 | 查看单个trace的详细信息 | 点击选中的trace |
| 3 | 查看性能剖析对应关键事务信息 | 选择关键事务下对应名称 |
| 4 | 查看性能剖析对应的tier应用情况 |  选择应用程序下对应名称 |


* 线程分析页面   
* 调用栈信息可以根据需要进行展开和收缩。
* 此处的百分比是根据在采样周期中,该行代码总计被采样到的次数与总采样次数的百分比。代码后括号中的内容是该代码在事务中的行数。
* 停到某个类的某个方法比如 get 的方法,一般都是由于在进行密集计算,或者调用数据库但是数据库长时间没有返回结果,或者数据库中有锁。如果是 cpu 慢,就会出现在这里;如果由于锁等原因,就会出现在线程和锁的标签页中。


![](/images/p03.png)

* 注：如果想要进行  关键事务>性能剖析   则需要预先将要进行性能剖析的Web 事务设为关键事务。设置方法如下：

![](/images/p04.png)


